<!DOCTYPE html>
<!--[if lt IE 8]><html dir="ltr" lang="en-US" class="ie7" xmlns="http://www.w3.org/1999/xhtml"> <![endif]-->
<!--[if IE 8]><html dir="ltr" lang="en-US" class="ie8" xmlns="http://www.w3.org/1999/xhtml"> <![endif]-->
<!--[if gt IE 8]><!--><html dir="ltr" lang="en-US" xmlns="http://www.w3.org/1999/xhtml"><!--<![endif]-->

<head>

	<meta charset="UTF-8" />
	<meta name="author" content="peel.github.com" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
	
  	
    <title>peel / Grammar Nazi? Best practices for REST API design</title>
  

	<link rel="stylesheet" type="text/css" media="all" href="/css/style.css" />
	<link rel="shortcut icon" type="image/x-icon" href="/assets/general/favicon.ico" />
  <link rel="apple-touch-icon" href="/assets/general/apple-touch-icon-iphone.png" /> 
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/general/apple-touch-icon-ipad.png" /> 
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/general/apple-touch-icon-iphone4.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/general/apple-touch-icon-ipad3.png" />
     <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
		
</head>

<body id="body" class="Orange Stick Left Fill Default
    ">

<a href="https://github.com/peel"><img style="z-index:10; position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
	

		<div id="sidebar">

		<header id="header">
			<div id="logo">
				<a href="/">
          <div>Dev<b>/Notepack</b></div>
<!--					<img src="/assets/general/logo.png" alt="peel / the dev and the core of development hardcore" />-->
				</a>
			</div>
			<p id="tagline"><b>Peel</b>'s notes about <b>scala</b>, <b>java</b>, <b>play!</b> and AOSP - the dev and the core of development hardcore</p>
		</header>

		<nav id="menu">
			<ul class="main-menu">
         
          
          
          
          
            
                
                
                        
                    
            
          
        <li class="parent opened">
					<p><a href="/notes/">Notes</a></p>
          
					<div>
						<ul class="sub-menu">	
							<li class="selected"><p><a title="allblog" href="/notes/">Noted</a></p></li>
							<li class=""><p><a title="archive" href="/notes/archive/">Archive</a></p></li>
						</ul>
					</div>
          
				</li>
         
          
          
          
          
            
                
                
                        
                    
            
          
        <li class="parent opened">
					<p><a href="/projects/">Projects</a></p>
          
				</li>
         
          
          
          
          
            
                
                
                        
                    
            
          
        <li class="parent opened">
					<p><a href="/about/">About me</a></p>
          
				</li>
         
          
          
          
          
            
                
                
                        
                    
            
          
        <li class="parent opened">
					<p><a href="/contact/">Contact</a></p>
          
				</li>
        
			</ul>		
		</nav>

		<form id="responsiveMenu">
			<select>
				<option selected data-href="#">Site Navigation</option>
         
    				<option data-href="/notes/">Notes</option>
         
    				<option data-href="/projects/">Projects</option>
         
    				<option data-href="/about/">About me</option>
         
    				<option data-href="/contact/">Contact</option>
        
			</select>
		</form>
		
		<footer id="copy">
			<p>Copyright Â© 2012 Piotr Limanowski.</p>
		</footer>

		<a href="#" id="close">close sidebar</a>

	</div>
	<div id="content" class="clearfix">

		<div>

	
		
			<section id="page" class="fullPost">

				<header id="pageHeader">
					<h1>Notes</h1>
					<a href="#" class="actionButton minimize" data-content="#page" data-speed="600">minimize</a>
				</header>

				<article class="post contentHolder clearfix">

					<h2>Grammar Nazi? Best practices for REST API design</h2>

					<ul class="postLinks">
            
			  			<li class="category">
			  				<strong><a href="/notes/category/architecture/">architecture</a></strong>
			  			</li>
            
						<li class="date">24 Aug 2012</li>
					</ul>

            <p>A few best practices regarding designing REST APIs I try to follow when re/designing web grammar.</p>

<h3>Fundamentals</h3>

<h4>Idempotency</h4>

<p>A service should return the same value upon every invocation w/ the same payload; use tokens (i.e. in REST POST URI)</p>

<h4>Self-documentation</h4>

<p>Service naming, method naming should be self-documenting. Follow REST convention when designing</p>

<h4>RESTfulness</h4>

<p>Keep POST params in body, asynchronously fetch and return media and follow the rule:</p>

<pre><code>Create   POST     /Customers
Fetch    GET      /Customers/ID123
Modify   PUT/POST /Customers/ID123
Remove   DELETE   /Customers/ID123
</code></pre>

<h4>Versioning</h4>

<p> To provide flexibility keep version number in RESTful service URIs, i.e.
 <code>GET /api/v1/Resource</code></p>

<h4>Statefulness</h4>

<p>As keeping state is non trivial it is generally a good practice to avoid making a user to keep state. Instead if possible make your service stateful</p>

<h4>Predictability</h4>

<p>Once again a naming convention; keep names understandable;</p>

<h4>Responsiveness</h4>

<p>When a response is available immediately, use a synchronous response.<br/>
Otherwise, consider an asynchronous webhook rather than polling.</p>

<hr />

<h3>RESTful API grammar design</h3>

<h4>Use nouns not verbs</h4>

<p>Keep verbs out of your base URLs. As in JAX-WS':</p>

<pre><code>/getCustomer
/getCustomerData
</code></pre>

<p>use two base URLs per resource</p>

<pre><code>/customers
/customers/1234
...
</code></pre>

<p>use HTTP verbs to operate on data</p>

<pre><code>| Resource        | POST           | GET               | PUT           | DELETE        |
| --------------- | -------------- | ----------------- | ------------- | ------------- |
| /customers      | new customer   | list customers    | bulk update   | delete all    |
| /customers/123  | invalid        | get 1234's data   | update/fault  | delete 1234   |                       
</code></pre>

<h4>Plurality and concreteness</h4>

<p>make API's nouns plural and concrete</p>

<h4>Simplify associations</h4>

<p>Customers have relationship w/ PBAs who have relationships w/
To avoid complex structures like ie.</p>

<pre><code>GET    /customers/1234/accounts/1234/owner/1234
</code></pre>

<p>it is generaly a good practice to hide the comples structures behind the '?'. It makes simple for developers to use the base URL w/ additional attibutes:</p>

<pre><code>GET    /customers?status=Gold
</code></pre>

<h4>Status codes and error handling</h4>

<p>It is generally a good practice to keep a limited subset of status codes and a verbose description of the status along w/ a link to a detailed description (Status enum does a great job here). When designing from ground up start by using 3 basic status codes: 200, 400, 500 to eventually grow your list to 5-7 codes.</p>

<h4>API Versioning</h4>

<p>API version (in URL) should be bumped up when the change modifies expected response, minor version updates should be put in a header.
One version back support is obligatory.</p>

<h4>Pagination</h4>

<p>Use count and start for pagination i.e.</p>

<pre><code>GET    /customers?start=10&amp;count=10
</code></pre>

<p>also it is valueable to keep a default values for calls w/o parameters.</p>

<h4>Non-resource scenarios</h4>

<p>When designing a non-resource scenario it is a recommended approach to use verbs instead of nouns, i.e.</p>

<pre><code>GET    /convert?from=PLN&amp;to=EUR&amp;amount=1000
</code></pre>

<h4>Polyformat services</h4>

<p>As of now the established format is a verbose XML. The XML is being used in such components as Oracle Service Bus and Oracle BPM. Thus it is recommended to use this format as default. For more advanced, not based on the legacy XML format, applications it is recommended to provide a terse JSON representation.
JAXB supports JSON via Jettision project. JSON schema is also available.
It is recommended to let JSON data representation to be accessed via
<code>GET    /customers.json</code>
The above convention is based on conneg w/ JAX-RS that treats the <code>.{type}</code> as acceptable format.<br/>
For atrubutes naming a JavaScript conventions should be followed:</p>

<ul>
<li>CamelCase</li>
<li>Upper/lowercase depending on object type</li>
</ul>


<h4>Search</h4>

<p>For global search, use:
<code>GET     /search?q=customerId</code></p>

<p>For scoped search, use:
<code>GET     /customers/1234/accounts?=debit</code></p>

<h4>Provide exemplary client code in repository</h4>

<p>When using plain old JAX-WS SOAP web services we tend to generate clients for other apps to consume and place them in our local Nexus repository. In case of REST services you need to handle client-generation by yourself /even though RESTeasy does have a feature of code generation/. That's why we always place a sample code in the repo along with the service code.</p>

<h4>API facade design pattern</h4>

<p>API facade is a good design pattern to avoid unnecessary complexity on API consumer side.</p>


					<div class="commentsList">
              <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'peelblog'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments.</a></noscript>
 
					</div>

				</article>

				<div class="hasButtonsPost">
           
					<div class="btnClose2 hoverBack">
						<a href="/notes/">Close</a>
					</div>
          
				</div>

			</section>

		</div>

		<footer class="footer" id="topFooter">

			<div class="left">
				<div class="widget clearfix social">
					<ul class="socialList clearfix">
						<li><a target="_blank" class="twitter" href="http://twitter.com/peel">twitter icon</a></li>
						<li><a target="_blank" class="github" href="http://github.com/peel">github icon</a></li>
						<li><a target="_blank" class="linkedin" href="http://pl.linkedin.com/pub/piotr-limanowski/31/ba0/492">linkedin icon</a></li>
						<li><a target="_blank" class="flickr" href="http://www.flickr.com/photos/plimanowski">flickr icon</a></li>
						<li><a target="_blank" class="skype" href="skype:piotrlimanowski">skype icon</a></li>
						<li><a target="_blank" class="rss" href="http://feeds.feedburner.com/peelthekid">rss icon</a></li>
					</ul>
				</div>
				<hr class="widget_separator" />
				<div class="widget clearfix widget_search">
					<form action="#" id="searchform" class="searchBox">
						<input type="text" data-value="Type and hit Enter" value="Type and hit Enter" />
	   				</form>
	   			</div>			
	   		</div>
								
      <!--
			<div class="right">
				<div class="widget clearfix phone">
					<p class="phoneNumber">Hire Me <strong><a href="mailto:">now</a></strong></p>
				</div>			
			</div>
      -->
				
		</footer>

		<footer class="footer" id="bottomFooter">
			<div class="left">
				<div class="widget clearfix twitter">
					<p class="twitterIntro">Latest tweet:</p>
					<p class="hidden twitterUser">peel</p>
					<p class="twitterList"></p>
				</div>			
			</div>
			<a href="#" id="top">Go to Top <span>&uarr;</span></a>
		</footer>

	</div>
  
</div>

	<div id="scripts">
    

		<div id="fb-root"></div>

		<div id="mobileCheck"></div>
		
		<div id="oldie">This is a unique website which will require a more modern browser to work! <a href="https://www.google.com/chrome/">Please upgrade today!</a></div>

		<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
		<script type='text/javascript' src='/js/plugins.min.js'></script>
		<script type='text/javascript' src='/js/scripts.js'></script>
  
	</div>

</body>
</html>


