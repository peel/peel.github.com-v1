<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title>peel</title>
		<description>Random rants about software development</description>
		<link>http://peel.github.com</link>
		
			<item>
				<title>Grammar Nazi? Best practices for REST API design</title>
				<description>&lt;p&gt;A few best practices regarding designing REST APIs I try to follow when re/designing web grammar.&lt;/p&gt;

&lt;h3&gt;Fundamentals&lt;/h3&gt;

&lt;h4&gt;Idempotency&lt;/h4&gt;

&lt;p&gt;A service should return the same value upon every invocation w/ the same payload; use tokens (i.e. in REST POST URI)&lt;/p&gt;

&lt;h4&gt;Self-documentation&lt;/h4&gt;

&lt;p&gt;Service naming, method naming should be self-documenting. Follow REST convention when designing&lt;/p&gt;

&lt;h4&gt;RESTfulness&lt;/h4&gt;

&lt;p&gt;Keep POST params in body, asynchronously fetch and return media and follow the rule:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Create   POST     /Customers
Fetch    GET      /Customers/ID123
Modify   PUT/POST /Customers/ID123
Remove   DELETE   /Customers/ID123
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;Versioning&lt;/h4&gt;

&lt;p&gt; To provide flexibility keep version number in RESTful service URIs, i.e.
 &lt;code&gt;GET /api/v1/Resource&lt;/code&gt;&lt;/p&gt;

&lt;h4&gt;Statefulness&lt;/h4&gt;

&lt;p&gt;As keeping state is non trivial it is generally a good practice to avoid making a user to keep state. Instead if possible make your service stateful&lt;/p&gt;

&lt;h4&gt;Predictability&lt;/h4&gt;

&lt;p&gt;Once again a naming convention; keep names understandable;&lt;/p&gt;

&lt;h4&gt;Responsiveness&lt;/h4&gt;

&lt;p&gt;When a response is available immediately, use a synchronous response.&lt;br/&gt;
Otherwise, consider an asynchronous webhook rather than polling.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3&gt;RESTful API grammar design&lt;/h3&gt;

&lt;h4&gt;Use nouns not verbs&lt;/h4&gt;

&lt;p&gt;Keep verbs out of your base URLs. As in JAX-WS':&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/getCustomer
/getCustomerData
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;use two base URLs per resource&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/customers
/customers/1234
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;use HTTP verbs to operate on data&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;| Resource        | POST           | GET               | PUT           | DELETE        |
| --------------- | -------------- | ----------------- | ------------- | ------------- |
| /customers      | new customer   | list customers    | bulk update   | delete all    |
| /customers/123  | invalid        | get 1234's data   | update/fault  | delete 1234   |                       
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;Plurality and concreteness&lt;/h4&gt;

&lt;p&gt;make API's nouns plural and concrete&lt;/p&gt;

&lt;h4&gt;Simplify associations&lt;/h4&gt;

&lt;p&gt;Customers have relationship w/ PBAs who have relationships w/
To avoid complex structures like ie.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET    /customers/1234/accounts/1234/owner/1234
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;it is generaly a good practice to hide the comples structures behind the '?'. It makes simple for developers to use the base URL w/ additional attibutes:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET    /customers?status=Gold
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;Status codes and error handling&lt;/h4&gt;

&lt;p&gt;It is generally a good practice to keep a limited subset of status codes and a verbose description of the status along w/ a link to a detailed description (Status enum does a great job here). When designing from ground up start by using 3 basic status codes: 200, 400, 500 to eventually grow your list to 5-7 codes.&lt;/p&gt;

&lt;h4&gt;API Versioning&lt;/h4&gt;

&lt;p&gt;API version (in URL) should be bumped up when the change modifies expected response, minor version updates should be put in a header.
One version back support is obligatory.&lt;/p&gt;

&lt;h4&gt;Pagination&lt;/h4&gt;

&lt;p&gt;Use count and start for pagination i.e.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET    /customers?start=10&amp;amp;count=10
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;also it is valueable to keep a default values for calls w/o parameters.&lt;/p&gt;

&lt;h4&gt;Non-resource scenarios&lt;/h4&gt;

&lt;p&gt;When designing a non-resource scenario it is a recommended approach to use verbs instead of nouns, i.e.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET    /convert?from=PLN&amp;amp;to=EUR&amp;amp;amount=1000
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;Polyformat services&lt;/h4&gt;

&lt;p&gt;As of now the established format is a verbose XML. The XML is being used in such components as Oracle Service Bus and Oracle BPM. Thus it is recommended to use this format as default. For more advanced, not based on the legacy XML format, applications it is recommended to provide a terse JSON representation.
JAXB supports JSON via Jettision project. JSON schema is also available.
It is recommended to let JSON data representation to be accessed via
&lt;code&gt;GET    /customers.json&lt;/code&gt;
The above convention is based on conneg w/ JAX-RS that treats the &lt;code&gt;.{type}&lt;/code&gt; as acceptable format.&lt;br/&gt;
For atrubutes naming a JavaScript conventions should be followed:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CamelCase&lt;/li&gt;
&lt;li&gt;Upper/lowercase depending on object type&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;Search&lt;/h4&gt;

&lt;p&gt;For global search, use:
&lt;code&gt;GET     /search?q=customerId&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;For scoped search, use:
&lt;code&gt;GET     /customers/1234/accounts?=debit&lt;/code&gt;&lt;/p&gt;

&lt;h4&gt;Provide exemplary client code in repository&lt;/h4&gt;

&lt;p&gt;When using plain old JAX-WS SOAP web services we tend to generate clients for other apps to consume and place them in our local Nexus repository. In case of REST services you need to handle client-generation by yourself /even though RESTeasy does have a feature of code generation/. That's why we always place a sample code in the repo along with the service code.&lt;/p&gt;

&lt;h4&gt;API facade design pattern&lt;/h4&gt;

&lt;p&gt;API facade is a good design pattern to avoid unnecessary complexity on API consumer side.&lt;/p&gt;
</description>
				<published>2012-08-24 19:53:55 +0200</published>
				<link>http://peel.github.com/notes/2012/08/grammar-nazi-my-take-on-rest-grammar</link>
			</item>
		
	</channel>
</rss>